---
interface Props {
  src: string;
  alt?: string;
  width?: number | string;
  height?: number | string;
  caption?: string;
}

const { src, alt = "", width, height, caption } = Astro.props as Props;

if (!src) {
  throw new Error("<Image /> requires a src attribute.");
}

const widthAttr = typeof width === "number" ? String(width) : width;
const heightAttr = typeof height === "number" ? String(height) : height;
---

<figure class="my-6 flex flex-col gap-2 text-center">
  <img
    class="mx-auto rounded-2xl border border-border-light shadow-sm dark:border-border-dark"
    src={src}
    alt={alt}
    width={widthAttr}
    height={heightAttr}
    loading="lazy"
    decoding="async"
  />
  {caption && <figcaption class="text-sm text-slate-500 dark:text-slate-400">{caption}</figcaption>}
</figure>
